{% extends "base.html" %}
{% block content %}
<div class="container py-5" style="max-width: 800px;">
  <h3 class="fw-bold mb-4">‚úèÔ∏è Edit Quiz: {{ quiz.title }}</h3>

  <form method="post" class="card p-4 shadow-sm">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label fw-semibold">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</label>
      {{ form.title }}
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</label>
      {{ form.description }}
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label fw-semibold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
        {{ form.total_questions }}
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label fw-semibold">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô (%)</label>
        {{ form.pass_score }}
      </div>
    </div>

    <div class="d-flex justify-content-between mt-3">
      <a href="{% url 'course:course_detail' quiz.course.id %}" class="btn btn-outline-secondary">
        ‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™
      </a>
      <button type="submit" class="btn btn-success fw-semibold">
        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
      </button>
    </div>
  </form>

  <hr class="my-4">

  <h5 class="fw-semibold mb-3">üß© ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ô‡∏µ‡πâ</h5>

  {% for question in quiz.questions.all %}
    <div class="border rounded p-3 mb-2">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ forloop.counter }}.</strong> {{ question.text }}
        </div>
        <div class="d-flex gap-2">
          <a href="{% url 'quiz:edit_question' question.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è Edit</a>
          <a href="{% url 'quiz:delete_question' question.id %}" class="btn btn-danger btn-sm"
             onclick="return confirm('‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ?');">üóëÔ∏è Delete</a>
        </div>
      </div>
    </div>
  {% empty %}
    <p class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏ô‡∏µ‡πâ</p>
  {% endfor %}

  <div class="text-center mt-4">
    <a href="{% url 'quiz:add_question' quiz.id %}" class="btn btn-success">
      ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
    </a>
  </div>
</div>
{% endblock %}
