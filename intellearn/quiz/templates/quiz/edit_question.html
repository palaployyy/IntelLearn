{% extends "base.html" %}
{% block content %}
<div class="container py-5" style="max-width: 850px;">
  <div class="card shadow-lg border-0 p-4">
    <h2 class="fw-bold text-primary mb-3">{{ title }}</h2>
    <p class="text-muted mb-4">
      ‡∏Ñ‡∏≠‡∏£‡πå‡∏™: <strong>{{ quiz.course.title }}</strong><br>
      ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ quiz.created_at|date:"d M Y" }}
    </p>

    <form method="post" class="mb-4">
      {% csrf_token %}
      <div class="mb-3">
        <label class="form-label fw-semibold">‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏¥‡∏ã (Quiz Title)</label>
        {{ form.title }}
      </div>

      <div class="mb-3">
        <label class="form-label fw-semibold">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Description)</label>
        {{ form.description }}
      </div>

      <div class="mb-3">
        <label class="form-label fw-semibold">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô (%)</label>
        {{ form.pass_score }}
      </div>

      <div class="mb-4">
        <label class="form-label fw-semibold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
        {{ form.total_questions }}
      </div>

      <div class="d-flex justify-content-end gap-2">
        <button type="submit" class="btn btn-primary px-4">
          üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
        </button>
        <a href="{% url 'course:course_detail' quiz.course.id %}" class="btn btn-secondary px-4">
          ‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏£‡πå‡∏™
        </a>
      </div>
    </form>

    <hr class="my-4">

    <!-- ===== ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ===== -->
    <h4 class="fw-bold mb-3">üìã ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏ô‡∏µ‡πâ</h4>

    {% for q in quiz.questions.all %}
      <div class="card mb-3 shadow-sm p-3 border-0">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="fw-semibold mb-1">Q{{ forloop.counter }}. {{ q.text }}</h6>
            <p class="text-muted small mb-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {{ q.points }}</p>

            <ul class="list-unstyled small mb-2">
              {% for ans in q.answers.all %}
                <li>
                  {% if ans.is_correct %}
                    ‚úÖ <strong>{{ ans.text }}</strong>
                  {% else %}
                    ‚ùå {{ ans.text }}
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>

          <div class="d-flex gap-2">
            <a href="{% url 'quiz:edit_question' q.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
            <a href="{% url 'quiz:delete_question' q.id %}" class="btn btn-danger btn-sm"
               onclick="return confirm('‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ?');">
              üóëÔ∏è ‡∏•‡∏ö
            </a>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="alert alert-light border text-center">
        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏ô‡∏µ‡πâ
      </div>
    {% endfor %}

    <div class="d-flex justify-content-between align-items-center mt-4">
      <a href="{% url 'quiz:add_question' quiz.id %}" class="btn btn-success px-4">
        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
      </a>

      <a href="{% url 'quiz:delete_quiz' quiz.id %}" class="btn btn-danger px-4"
         onclick="return confirm('‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?');">
        üóëÔ∏è ‡∏•‡∏ö‡∏Ñ‡∏ß‡∏¥‡∏ã‡∏ô‡∏µ‡πâ
      </a>
    </div>
  </div>
</div>
{% endblock %}
