{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
/* ===== Hero Section ===== */
.hero-section {
  background: linear-gradient(135deg, #007bff, #00b4d8);
  color: #fff;
  border-radius: 20px;
  padding: 70px 30px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
}
.hero-section h1 {
  font-weight: 700;
  font-size: 2.4rem;
}
.hero-section p {
  font-size: 1.05rem;
  color: #eef7ff;
}

/* ===== Cards ===== */
.card {
  border: none;
  border-radius: 16px;
  overflow: hidden;
  transition: all .25s ease;
}
.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 22px rgba(0,0,0,.12);
}
.card img {
  height: 180px;
  object-fit: cover;
}
.card-title { font-weight: 600; color: #222; }
.card-text { color: #6b7280; }

/* ===== Buttons ===== */
.btn-custom {
  background: #0d6efd;
  color: #fff;
  border: none;
}
.btn-custom:hover { background: #055bd3; }

.price { color:#198754; font-weight:700; }

/* ===== Why Section ===== */
.why-section { background:#f8f9fa; padding:60px 0; }
.why-card {
  background:#fff; border-radius:14px; border:none; padding:26px; text-align:center;
  box-shadow:0 3px 10px rgba(0,0,0,.05); transition:.25s ease;
}
.why-card:hover { transform:translateY(-4px); box-shadow:0 8px 18px rgba(0,0,0,.08); }
.why-card img { width:70px; margin-bottom:14px; }
</style>

<!-- üîç Search -->
<div class="container mb-4 mt-3">
  <form method="get" class="row g-2 justify-content-center">
    <div class="col-md-3">
      <select name="field" class="form-select">
        <option value="">Search by...</option>
        <option value="title" {% if request.GET.field == "title" %}selected{% endif %}>Title</option>
        <option value="description" {% if request.GET.field == "description" %}selected{% endif %}>Description</option>
        <option value="instructor" {% if request.GET.field == "instructor" %}selected{% endif %}>Instructor</option>
      </select>
    </div>
    <div class="col-md-5">
      <input type="text" name="search" value="{{ request.GET.search }}" class="form-control" placeholder="üîé Type keyword...">
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary w-100">Search</button>
    </div>
  </form>
</div>

<!-- üåü Hero Section -->
<section class="hero-section mb-5">
  <h1>üìö Learn Anytime, Anywhere</h1>
  <p class="mb-3">Empower your skills with our interactive online courses</p>
  <a href="#courses" class="btn btn-light btn-lg px-4 fw-bold">Explore Courses</a>
</section>

<!-- üéì Featured Courses -->
<div class="container" id="courses">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">üéì Featured Courses</h2>

    {# ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏£‡πå‡∏™ ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏£‡∏π/‡∏™‡∏ï‡∏≤‡∏ü/‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô #}
    {% if user.is_authenticated %}
      {% if user.is_superuser or user.is_staff or user.groups.all.0.name == "instructor" %}
        <a href="{% url 'course:add_course' %}" class="btn btn-success">
          <i class="bi bi-plus-circle me-1"></i> Add Course
        </a>
      {% endif %}
    {% endif %}
  </div>

  <div class="row g-4">
    {% for course in courses %}
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm">
          {% if course.thumbnail_url %}
            <img src="{{ course.thumbnail_url }}" class="card-img-top" alt="{{ course.title }}">
          {% else %}
            <img src="{% static 'images/python.png' %}" class="card-img-top" alt="cover">
          {% endif %}

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ course.title }}</h5>
            <p class="card-text">{{ course.description|default:"No description."|truncatewords:18 }}</p>

            <div class="small mb-1">üìö {{ course.lesson_count|default:course.lessons.count }} lessons</div>
            <div class="small text-muted mb-2">üë©‚Äçüéì {{ course.student_count|default:course.enrollments.count }} students</div>

            <div class="price mb-3">‡∏ø{{ course.price }}</div>

            <div class="mt-auto d-flex gap-2">
              {# ‡∏Ñ‡∏£‡∏π/‡∏™‡∏ï‡∏≤‡∏ü/‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô: Edit/Delete + View #}
              {% if user.is_authenticated %}
                {% if user.is_superuser or user.is_staff or user.groups.all.0.name == "instructor" %}
                  <a href="{% url 'course:edit_course' course.id %}" class="btn btn-warning btn-sm flex-fill">
                    <i class="bi bi-pencil-square me-1"></i> Edit
                  </a>
                  <form method="post" action="{% url 'course:delete_course' course.id %}" class="flex-fill">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm w-100"
                            onclick="return confirm('Delete this course?');">
                      <i class="bi bi-trash me-1"></i> Delete
                    </button>
                  </form>
                  <a href="{% url 'course:course_detail' course.id %}" class="btn btn-custom btn-sm flex-fill">
                    <i class="bi bi-book me-1"></i> View
                  </a>
                {% else %}
                  {# ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ View #}
                  <a href="{% url 'course:course_detail' course.id %}" class="btn btn-custom btn-sm w-100">
                    <i class="bi bi-book me-1"></i> View
                  </a>
                {% endif %}
              {% else %}
                <a href="{% url 'course:course_detail' course.id %}" class="btn btn-custom btn-sm w-100">
                  <i class="bi bi-book me-1"></i> View
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-light border text-center">
          No courses available.
          {% if user.is_authenticated %}
            {% if user.is_superuser or user.is_staff or user.groups.all.0.name == "instructor" %}
              <a href="{% url 'course:add_course' %}" class="alert-link ms-1">Add the first course</a>
            {% endif %}
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- üí° Why Choose Intellearn -->
<section class="why-section mt-5">
  <div class="container">
    <h2 class="fw-bold text-center mb-5">Why Choose Intellearn</h2>
    <div class="row g-4">
      <div class="col-md-3">
        <div class="why-card h-100">
          <img src="{% static 'images/teacher.png' %}" alt="Expert Instructors">
          <h5>Expert Instructors</h5>
          <p>Learn from industry experts with years of experience.</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="why-card h-100">
          <img src="{% static 'images/flexibility.png' %}" alt="Flexible Learning">
          <h5>Flexible Learning</h5>
          <p>Study anytime, anywhere at your own pace.</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="why-card h-100">
          <img src="{% static 'images/certificate.png' %}" alt="Certification">
          <h5>Certification</h5>
          <p>Receive recognized certificates upon completion.</p>
        </div>
      </div>
      <div class="col-md-3">
        <div class="why-card h-100">
          <img src="{% static 'images/support.png' %}" alt="Support">
          <h5>24/7 Support</h5>
          <p>Get guidance and support whenever you need it.</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
