{% extends "base.html" %}

{% block title %}Payment Status ¬∑ #{{ payment.id }}{% endblock %}

{% block head_extra %}
<style>
  .status-badge{
    display:inline-flex;align-items:center;gap:8px;
    padding:6px 10px;border-radius:999px;font-size:13px;
    border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.04)
  }
  .status-paid{border-color:rgba(34,197,94,.45)}
  .status-pending{border-color:rgba(59,130,246,.45)}
  .status-failed{border-color:rgba(239,68,68,.55)}
  .btn-row{display:flex;flex-wrap:wrap;gap:12px;margin-top:14px}
  .btn-ghost{
    display:inline-block;padding:10px 14px;border-radius:12px;
    border:1px solid rgba(255,255,255,.18);text-decoration:none;color:inherit;
    background:rgba(255,255,255,.02)
  }
  .proof{margin-top:10px}
  .proof img{max-width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.12)}
  .kv{display:grid;grid-template-columns:160px 1fr;gap:8px 16px;margin-top:12px}
  .kv .k{color:var(--muted)}
</style>
{% endblock %}

{% block content %}
<h1>Payment Status</h1>

<div class="card" style="margin-bottom:18px">
  <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center">
    <div>
      <div class="muted" style="font-size:14px">Payment ID: #{{ payment.id }}</div>
      <div style="font-size:22px;font-weight:800;margin-top:4px">‡∏ø{{ payment.amount|floatformat:2 }}</div>
    </div>
    <div>
      {% if payment.status == "paid" %}
        <span class="status-badge status-paid">‚úÖ {{ payment.get_status_display }}</span>
      {% elif payment.status == "pending" %}
        <span class="status-badge status-pending">üïí {{ payment.get_status_display }}</span>
      {% else %}
        <span class="status-badge status-failed">‚ùå {{ payment.get_status_display }}</span>
      {% endif %}
    </div>
  </div>

  {% if payment.status == "paid" %}
    <div class="alert success" style="margin-top:12px">
      üéâ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß
    </div>
  {% elif payment.status == "pending" %}
    <div class="alert info" style="margin-top:12px">
      ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ ‡∏´‡∏≤‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    </div>
  {% else %}
    <div class="alert error" style="margin-top:12px">
      ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
    </div>
  {% endif %}
</div>

<div class="grid">
  <!-- Course summary -->
  <div class="card">
    <div class="media"><div class="play"></div></div>
    <div class="title">{{ payment.course.title }}</div>
    <div class="muted">‡∏Ñ‡∏≠‡∏£‡πå‡∏™</div>
    <div class="price">‡∏ø{{ payment.course.price|default:payment.amount|floatformat:2 }}</div>

    <div class="btn-row">
      <a class="btn" href="/courses/{{ payment.course.id }}/">‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™</a>
      <a class="btn-ghost" href="/me/courses/">‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
    </div>
  </div>

  <!-- Payment details -->
  <div class="card">
    <div class="section-title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
    <div class="kv">
      <div class="k">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞</div><div>{{ payment.get_method_display }}</div>
      <div class="k">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</div><div>{{ payment.get_status_display }}</div>
      <div class="k">‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞</div><div>‡∏ø{{ payment.amount|floatformat:2 }}</div>
      <div class="k">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠</div><div>{{ payment.created_at|date:"d M Y, H:i" }}</div>
      <div class="k">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠</div><div>{% if payment.confirmed_at %}{{ payment.confirmed_at|date:"d M Y, H:i" }}{% else %}-{% endif %}</div>
    </div>

    {% if payment.proof %}
      <div class="section-title" style="margin-top:18px">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
      <div class="proof">
        <a href="{{ payment.proof.url }}" target="_blank" rel="noopener">
          <img src="{{ payment.proof.url }}" alt="Payment proof">
        </a>
      </div>
    {% endif %}

    <div class="btn-row" style="margin-top:18px">
      <a class="btn-ghost" href="/payments/checkout/{{ payment.course.id }}/">‡∏ä‡∏≥‡∏£‡∏∞‡πÉ‡∏´‡∏°‡πà</a>
      <a class="btn-ghost" href="/dashboard/">‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</a>
    </div>
  </div>
</div>
{% endblock %}
